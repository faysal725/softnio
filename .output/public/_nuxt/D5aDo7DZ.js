import{_ as X}from"./CFiVYx8k.js";import{_ as Y}from"./CEXEYitW.js";import{u as Z}from"./DpKUsNxY.js";import{o as r,c as d,a as e,r as c,q as F,h as C,x as t,y as B,F as O,L as K,V as ee,W as te,D as se,E as M,b as h,w as $,t as P,z as A,A as W,s as N,P as ae,B as oe,d as L,T as re,v as ne,K as le}from"./XY3UzohT.js";import{a as q,n as T}from"./CpvEckui.js";import{u as V}from"./ChbJ13di.js";import{_ as ie}from"./2wlHjzUZ.js";import{a as de,r as ce}from"./CBB12qzl.js";import{s as ue}from"./CSnONx0W.js";import{r as _e}from"./DQ6FSbzr.js";import{r as U}from"./BYR5v2HT.js";import{_ as pe}from"./UApX37xP.js";import{_ as fe}from"./BIXwOgyL.js";import{_ as me}from"./DCEu3b_b.js";import{u as he}from"./B1EgQ22S.js";import{_ as ge}from"./XMqicWYT.js";import{u as ve}from"./BgqH8Znm.js";import"./CbyYoqDF.js";import"./BYhLHWSw.js";function xe(u,n){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z","clip-rule":"evenodd"})])}const we={class:"border border-blue-300 shadow rounded-md p-4 max-w-sm h-40 w-full mx-auto"},ye=e("div",{class:"animate-pulse flex justify-center items-center space-x-4 h-full"},[e("div",{class:"rounded-full bg-slate-700 h-20 w-20"})],-1),be=[ye],$e={__name:"Friends",props:{loaderState:{type:String,default:""}},setup(u){const n=u,i=Z(),s=c(!1);return F(()=>{n.loaderState&&(n.loaderState=="pending"?s.value=!0:s.value=!1)}),C(()=>i.loaderState,()=>{n.loaderState||(i.loaderState=="pending"?s.value=!0:s.value=!1)}),C(()=>n.loaderState,()=>{n.loaderState=="pending"?s.value=!0:s.value=!1}),(_,k)=>t(s)?(r(),d(O,{key:0},B([1,2,3,4],x=>e("div",we,be)),64)):K(_.$slots,"default",{key:1})}},ke=ee();ke.use(te);const J=se("friendsStore",{state:()=>({currentFriendId:null,currentFriend:null,shouldReload:!1}),persist:!0,actions:{getCurrentFriend(){return currentFriend},setCurrentFriend(u){this.currentFriendId=u.user[0]._id,this.currentFriend=u},setCurrentFriendFromSlider(u){console.log(u.allData);const{allData:n}=u;console.log(n),this.currentFriendId=n.user[0]._id,this.currentFriend=n},setShouldReload(u){this.shouldReload=u},clearCurrentFriend(){this.currentFriendId=null,this.currentFriend=null,this.shouldReload=!1}}}),Se={class:"grid grid-cols-2 lg:grid-cols-3 gap-2"},Fe={class:"cursor-pointer relative overflow-hidden rounded-lg"},Ce=["src"],De=e("span",{class:"absolute bottom-0 right-0 w-full h-full bg-gradient-to-b from-transparent to-black"},null,-1),Re={class:"absolute bottom-3 right-0 w-full h-fit flex justify-center"},Ie={class:"font-semibold text-base text-white z-10 text-center"},Pe={key:0,class:"text-xs text-red-500"},Ne={__name:"Gallary",setup(u){let n=q()+"/api/auth/favourites";const i=V();M();const s=J(),{getCurrentFriend:_,clearCurrentFriend:k,setCurrentFriend:x,setCurrentFriendFromSlider:b,setShouldReload:v}=s;c([{name:"Name",imgSrc:"/profilePg/2.png"},{name:"Name",imgSrc:"/profilePg/3.png"},{name:"Name",imgSrc:"/profilePg/4.png"},{name:"Name",imgSrc:"/profilePg/5.png"},{name:"Name",imgSrc:"/profilePg/6.png"},{name:"Name",imgSrc:"/profilePg/7.png"}]);const g=c(),y=c([]),o=async()=>{g.value="pending",await i.index({path:n}).then(f=>{f.status==200?(console.log(f,"runn"),y.value=f.res.data.data,g.value="resolved",v(!1)):g.value="failed"})};return F(()=>{o()}),C(()=>s.shouldReload,()=>{s.shouldReload&&o()}),(f,m)=>{const a=$e;return r(),d("div",Se,[h(a,{loaderState:t(g)},{default:$(()=>[(r(!0),d(O,null,B(t(y),w=>(r(),d("div",Fe,[e("img",{src:("networkImage"in f?f.networkImage:t(T))(w.user[0].profile_image),alt:"",class:"w-full h-full rounded-lg"},null,8,Ce),De,e("div",Re,[e("p",Ie,P(w.user[0].first_name),1)])]))),256)),t(y).length==0?(r(),d("p",Pe," No Items to show ")):A("",!0)]),_:1},8,["loaderState"])])}}},qe={class:"space-2"},Ae={class:"flex items-center gap-5 p-3 px-5 bg-whitePrimary dark:bg-blackPrimary"},je={class:"h-16 w-16"},Be=["onClick","src"],Oe={class:"space-y-2"},Te={class:"text-lg max-w-xs dark:text-white"},Ve={class:"flex items-center gap-3"},Ee=["onClick"],Me=e("p",null,"Accept",-1),ze=[Me],Ge=["onClick"],Le=e("p",null,"Reject",-1),Ue=[Le],Ze={key:0,class:"text-xs text-red-500"},Ke={__name:"Request",setup(u){let n=q()+"/api/auth/friends/request",i=q()+"/api/auth/accept-friend-request",s=q()+"/api/auth/reject-friend-request";const _=V(),k=M();c([{_id:"66af50aa8182362e47c9fcdb",from_user:"6683a3c3e224e11f6c0af7d3",to_user:"66a36ad820ecb1682a5d0a03",status:"pending",createdAt:"2024-08-04T09:58:02.607Z",updatedAt:"2024-08-04T09:58:02.607Z",__v:0,lookupUserId:"6683a3c3e224e11f6c0af7d3",user:[{_id:"6683a3c3e224e11f6c0af7d3",email:"user21@mail.com",first_name:"william blazkowitz ",profile_image:"uploads/1722502437023-869428631self.jpeg"}]}]);const x=c(),b=c([]),v=async o=>{await W().$toast.info(o)},g=async()=>{x.value="pending",await _.index({path:n}).then(o=>{o.status==200?(console.log(o,"runn"),b.value=o.res.data.data,x.value="resolved"):x.value="failed"})},y=async(o,f)=>{x.value="pending";let m;o=="APPROVED"?m=i:m=s;let a={requestId:f._id};console.log(o,a),await _.store({body:a,path:m}).then(w=>{w.status==200?(v(`Participant ${o} successfully`),g()):(v(`Participant ${o} failed`),x.value="failed")})};return F(()=>{g()}),(o,f)=>{const m=ie;return r(),d("div",qe,[h(m,{loaderState:t(x)},{default:$(()=>[(r(!0),d(O,null,B(t(b),a=>{var w,S;return r(),d("div",Ae,[e("div",je,[e("img",{onClick:D=>t(k).push("/profile/view/"+a.user[0]._id),src:("networkImage"in o?o.networkImage:t(T))(a!=null&&a.user[0]?(w=a==null?void 0:a.user[0])==null?void 0:w.profile_image:"#"),alt:"",class:"h-full w-full rounded-full object-cover cursor-pointer"},null,8,Be)]),e("div",Oe,[e("p",Te,P((S=a==null?void 0:a.user[0])==null?void 0:S.first_name)+" sent you friend request ",1),e("div",Ve,[e("button",{onClick:D=>y("APPROVED",a),class:"bg-green-700 py-1 text-white rounded-2xl px-2 text-xs flex gap-2 items-center justify-center"},ze,8,Ee),e("button",{onClick:D=>y("REJECTED",a),class:"bg-primary py-1 text-white rounded-2xl px-2 text-xs flex gap-2 items-center justify-center"},Ue,8,Ge)])])])}),256)),t(b).length==0?(r(),d("p",Ze,"No Items to show")):A("",!0)]),_:1},8,["loaderState"])])}}},We={class:"block w-fit rounded-full shadow-2xl p-2 border border-slate-300 bg-white dark:bg-mediumBlack cursor-pointer hover:scale-110 transition-all duration-200"},Je={__name:"Chevron",props:{left:{type:Boolean,default:!0}},setup(u){return(n,i)=>(r(),d("span",We,[u.left?(r(),N(t(de),{key:0,class:"h-10 w-10 lg:h-8 lg:w-8 text-black dark:text-white"})):(r(),N(t(ce),{key:1,class:"h-10 w-10 lg:h-8 lg:w-8 text-black dark:text-white"}))]))}},He={class:"h-fit flex flex-col"},Qe={class:"slider flex h-[100%]"},Xe={class:"flex mx-auto justify-center relative w-[90vw] h-[50vh] md:w-[90vw] md:h-[65vh] lg:w-[450px] lg:h-[500px] m-auto overflow-hidden"},Ye={class:"bg-gradient-to-b from-transparent via-transparent to-black w-full h-full flex items-end"},et={class:"mb-14 ml-8 space-y-2"},tt={class:"text-3xl font-semibold text-whitePrimary"},st={class:"flex items-center gap-3"},at={class:"flex items-center gap-1 text-slate-200 dark:text-slate-300 text-sm"},ot={class:"flex items-center gap-1 text-slate-200 dark:text-slate-300 text-sm"},rt={class:"absolute top-3 right-3"},nt=["onClick"],lt={__name:"Slider",props:{sliderData:{type:Array,default:[]}},emits:["forward","backword","currentdata","callfavorite"],setup(u,{emit:n}){const i=u,s=n,_=c(0);let k;const x=c(!1);c(!1);const b=async()=>{await s("forward"),console.log(i.sliderData.length),_.value=await(_.value+1)%i.sliderData.length},v=async()=>{await s("backword"),_.value=await(_.value-1+i.sliderData.length)%i.sliderData.length,await x||g()},g=()=>{k=ue(()=>{b()},3e3)},y=(o,f)=>{s("callfavorite",{toUserId:o,isFavourite:f})};return F(()=>{}),ae(()=>{clearInterval(k)}),C(()=>_.value,()=>{console.log("curerntslider ",i.sliderData,_.value),s("currentdata",i.sliderData[_.value])}),C(()=>i.sliderData.length,()=>{s("currentdata",i.sliderData[_.value])}),(o,f)=>{const m=Je;return r(),d("div",He,[e("div",Qe,[e("div",Xe,[(r(!0),d(O,null,B(i.sliderData,(a,w)=>(r(),N(re,{key:w,name:"slide-fade"},{default:$(()=>[w===_.value?(r(),d("div",{key:0,class:"h-full w-full absolute rounded-xl bg-no-repeat bg-cover bg-center overflow-hidden",style:oe({backgroundImage:`url(${a.src})`})},[e("div",Ye,[e("div",et,[e("p",tt,P(a.name),1),e("div",st,[e("span",at,[h(t(_e),{class:"h-5 w-5 text-secondary"}),L(" "+P(Math.floor(a.distance))+" KM away ",1)]),e("span",ot,[h(t(U),{class:"h-5 w-5 text-secondary"}),L(" "+P(a.likes),1)])])]),e("div",rt,[e("button",{onClick:S=>y(a.allData.user[0]._id,!1),class:"bg-red-200 p-2 rounded-full"},[h(t(U),{class:"h-8 w-8 text-primary"})],8,nt)])])],4)):A("",!0)]),_:2},1024))),128))]),e("div",{class:"absolute right-0 top-[45%] md:-right-2 md:top-[50%] lg:-right-20 lg:top-[50%]",onClick:b},[h(m,{left:!1})]),e("div",{class:"absolute left-0 top-[45%] md:-left-2 md:top-[50%] lg:-left-20 lg:top-[50%]",onClick:v},[h(m,{left:!0})])])])}}},it={key:0,class:"border border-blue-300 shadow rounded-md p-4 max-w-2xl h-fit w-full mx-auto"},dt=e("div",{class:"animate-pulse flex justify-center items-center space-x-4 h-full"},[e("div",{class:"rounded-full bg-slate-700 h-96 w-96"})],-1),ct=[dt],ut={__name:"Slider",props:{loaderState:{type:String,default:""}},setup(u){const n=u,i=Z(),s=c(!1);return F(()=>{n.loaderState&&(n.loaderState=="pending"?s.value=!0:s.value=!1)}),C(()=>i.loaderState,()=>{n.loaderState||(i.loaderState=="pending"?s.value=!0:s.value=!1)}),C(()=>n.loaderState,()=>{n.loaderState=="pending"?s.value=!0:s.value=!1}),(_,k)=>(r(),d("div",null,[t(s)?(r(),d("div",it,ct)):K(_.$slots,"default",{key:1})]))}},_t={class:"flex justify-start items-center lg:justify-center lg:items-center h-full flex-col space-y-8 min-h-[40vh] lg:min-h-[90vh]"},pt={key:0,class:"relative"},ft={key:1,class:"relative"},mt=e("p",{class:"text-3xl font-bold text-red-500/80"},"No Friends to show",-1),ht=[mt],gt={key:2,class:"flex justify-center flex-col items-center gap-7 w-full"},vt={class:"hidden lg:flex gap-4"},xt={class:"space-y-3 px-8 lg:hidden w-full"},wt=e("p",{class:"text-xl font-semibold dark:text-white"},"About",-1),yt={class:"text-darkGrey dark:text-slate-300 text-base"},bt={class:"space-y-3 w-full px-8 pb-36 lg:hidden"},$t=e("p",{class:"text-xl font-semibold dark:text-white"},"Interests",-1),kt={key:0,class:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4"},St={class:"flex items-center justify-center rounded-full px-4 py-1 rounded-3xl gap-3 border cursor-pointer border-primary"},Ft=["src"],Ct={class:"text-center capitalize text-xs md:text-sm font-medium text-wrap dark:text-white"},Dt={key:1},Rt=e("p",{class:"text-primary font-semibold text-sm"},"No Item to show",-1),It=[Rt],Pt={__name:"GallarySlider",props:{interestOption:{type:Array,default:[]}},setup(u){let n=q()+"/api/auth/get/next/favourites?page=",i=q()+"/api/auth/make-favorite";const s=J(),{getCurrentFriend:_,clearCurrentFriend:k,setCurrentFriend:x,setCurrentFriendFromSlider:b,setShouldReload:v}=s,{paginationData:g,paginationController:y}=he(),o=c(),f=V();c(0);const m=c([]),a=async p=>{await W().$toast.info(p)},w=async()=>{o.value="pending",await f.index({path:n+g.value.currentPage}).then(p=>{p.status==200?(g.value=p.res.data.metadata,p.res.data.data.length>0&&(x(p.res.data.data[0]),p.res.data.data.map((l,R)=>{m.value.push({id:l.user[0]._id,name:l.user[0].first_name,distance:l.distance,likes:l.favouriteCount,src:T(l.user[0].profile_image),alt:"image-"+R,allData:l})})),console.log(p.res.data.metadata),o.value="resolved"):o.value="failed"})},S=async()=>{await f.index({path:n+g.value.currentPage}).then(p=>{p.status==200&&(g.value=p.res.data.metadata,p.res.data.data.length>0&&p.res.data.data.map((l,R)=>{m.value.push({id:l.user[0]._id,name:l.user[0].first_name,distance:l.distance,likes:l.favouriteCount,src:T(l.user[0].profile_image),alt:"image-"+R,allData:l})}),console.log(p.res.data.metadata))})};c(123);const D=async p=>{o.value="pending",await f.store({body:p,path:i}).then(async l=>{l.status==200?(await a("Request Sended successful"),o.value="resolve",v(!0)):(a("Request Send Failed"),o.value="failed")})};return F(()=>{w()}),(p,l)=>{const R=lt,E=ut,j=pe,H=fe,Q=me;return r(),d("main",_t,[t(m).length>0?(r(),d("section",pt,[h(E,{loaderState:t(o)},{default:$(()=>[(r(),N(R,{key:Math.random(),sliderData:t(m),onForward:l[0]||(l[0]=async()=>await t(y)(S,!0)),onBackword:l[1]||(l[1]=async()=>await t(y)(S,!1)),onCurrentdata:l[2]||(l[2]=I=>{I&&t(b)(I)}),onCallfavorite:l[3]||(l[3]=I=>D(I))},null,8,["sliderData"]))]),_:1},8,["loaderState"])])):(r(),d("section",ft,ht)),t(m).length>0?(r(),d("div",gt,[e("div",vt,[h(H,{to:"/profile/view/"+t(s).currentFriendId},{default:$(()=>[h(j,{name:"Show Profile",classes:"w-full h-full bg-gradient-to-r inline-flex justify-center items-center from-primary to-secondary py-1 px-4 rounded-full text-base lg:text-lg font-normal text-white hover:bg-gradient-to-r hover:from-secondary hover:to-primary"},{default:$(()=>[h(t(xe),{class:"h-5 w-5 text-white ml-3"})]),_:1})]),_:1},8,["to"])]),e("section",xt,[wt,e("p",yt,P(t(s).currentFriend?t(s).currentFriend.user[0].description:"None"),1)]),e("section",bt,[$t,h(Q,{loaderState:t(o)},{default:$(()=>{var I,z;return[((I=t(s).currentFriend)==null?void 0:I.user[0].interests.length)>0?(r(),d("div",kt,[(r(!0),d(O,null,B((z=t(s).currentFriend)==null?void 0:z.user[0].interests,G=>(r(),d("div",St,[e("img",{src:G.image,alt:"",class:"h-7 w-7"},null,8,Ft),e("p",Ct,P(G.title),1)]))),256))])):(r(),d("div",Dt,It))]}),_:1},8,["loaderState"])])])):A("",!0)])}}},Nt={class:"cursor-default"},qt={class:"flex lg:hidden items-center pb-8"},At=e("p",{class:"ml-3 text-3xl font-bold dark:text-slate-200"},"Friends",-1),jt={class:"min-h-screen"},Bt={class:"h-fit"},Ot={class:"max-h-[80vh] lg:max-h-screen lg:pt-10 px-2 lg:px-8 bg-transparent overflow-y-scroll lg:overflow-hidden"},Tt={class:"mx-auto gap-6 relative h-full"},Vt={class:"space-y-5 md:space-y-6 h-full"},Et={class:"block lg:hidden"},Mt={class:"hidden lg:block"},ls={__name:"index",setup(u){let n=q()+"/api/admin/interest/public/list";const i=c(),s=ve(),{getStatus:_,setStatus:k}=s,x=V(),b=c(),v=c(1);c(!1),M(),c({interest:"",gender:null,age:"",distance:""});let g=[{key:1,value:"Friends",href:"friends"}];const y=c(),o=c(!1),f=async()=>{await x.get({path:n}).then(m=>{i.value=m.res.data})};return F(()=>{f()}),F(()=>{b.value=_()}),C(()=>v.value,()=>{console.log(v.value)}),(m,a)=>{const w=X,S=Y,D=Ne,p=Ke,l=Pt,R=ge,E=ne;return r(),N(E,{name:"authenticated",ref_key:"layout",ref:y,tabs:t(g)},{"sidebar-sec-1":$(()=>[e("div",Nt,[e("div",qt,[h(w),At]),h(S,{modelValue:t(v),"onUpdate:modelValue":a[0]||(a[0]=j=>le(v)?v.value=j:null),tabData:t(g),pageName:"friends"},null,8,["modelValue","tabData"])])]),"sidebar-sec-2":$(()=>[e("div",jt,[t(v)==1?(r(),N(D,{key:0})):A("",!0),t(v)==2?(r(),N(p,{key:1})):A("",!0)])]),default:$(()=>[e("section",Bt,[e("section",Ot,[e("section",Tt,[e("div",Vt,[e("div",Et,[h(D,{onClick:a[1]||(a[1]=j=>o.value=!0)})]),e("div",Mt,[h(l)])])])])]),h(R,{shouldOpen:t(o),onUpdateInput:a[2]||(a[2]=j=>o.value=!1)},{default:$(()=>[h(l,{interestOption:t(i)},null,8,["interestOption"])]),_:1},8,["shouldOpen"])]),_:1},8,["tabs"])}}};export{ls as default};
